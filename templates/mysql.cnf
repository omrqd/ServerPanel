# MySQL 8.0 Production Configuration
# Generated by Server Panel
# Optimized for low-memory VPS with swap support

[mysqld]
# Basic Settings
user                    = mysql
pid-file                = /var/run/mysqld/mysqld.pid
socket                  = /var/run/mysqld/mysqld.sock
datadir                 = /var/lib/mysql
tmpdir                  = /tmp
lc-messages-dir         = /usr/share/mysql
skip-external-locking

# Bind Address - localhost only for security
bind-address            = 127.0.0.1
port                    = 3306

# Character Set
character-set-server    = utf8mb4
collation-server        = utf8mb4_unicode_ci

# InnoDB Settings - Optimized for low memory
innodb_buffer_pool_size         = 128M
innodb_buffer_pool_instances    = 1
innodb_log_file_size            = 48M
innodb_log_buffer_size          = 16M
innodb_file_per_table           = 1
innodb_open_files               = 400
innodb_io_capacity              = 400
innodb_flush_method             = O_DIRECT
innodb_flush_log_at_trx_commit  = 2
innodb_read_io_threads          = 4
innodb_write_io_threads         = 4

# Connection Settings
max_connections                 = 100
max_connect_errors              = 100
wait_timeout                    = 600
interactive_timeout             = 600
connect_timeout                 = 10

# Thread and Buffer Settings
thread_cache_size               = 10
thread_stack                    = 256K
sort_buffer_size                = 2M
read_buffer_size                = 2M
read_rnd_buffer_size            = 512K
join_buffer_size                = 2M

# Temp Tables
tmp_table_size                  = 32M
max_heap_table_size             = 32M

# Table Settings
table_open_cache                = 200
table_definition_cache          = 400
open_files_limit                = 65535

# Query Cache (disabled in MySQL 8.0+)
# query_cache_type              = 0

# Binary Logging (enable for replication)
# log_bin                       = mysql-bin
# binlog_format                 = ROW
# expire_logs_days              = 7
# max_binlog_size               = 100M

# Slow Query Log
slow_query_log                  = 1
slow_query_log_file             = /var/log/mysql/slow.log
long_query_time                 = 2
log_queries_not_using_indexes   = 0

# Error Log
log_error                       = /var/log/mysql/error.log

# Performance Schema
performance_schema              = ON

# Security
local_infile                    = 0
symbolic-links                  = 0
sql_mode                        = STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION

[mysqldump]
quick
quote-names
max_allowed_packet              = 64M

[mysql]
no-auto-rehash
default-character-set           = utf8mb4

[client]
default-character-set           = utf8mb4
port                            = 3306
socket                          = /var/run/mysqld/mysqld.sock
